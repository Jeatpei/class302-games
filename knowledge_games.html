<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å‚‘ç‰¹ä½©çŸ¥è­˜æ®¿å ‚</title>
    <style>
        body { font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; margin: 0; padding: 0; overflow: hidden; background: #000; color: #333; user-select: none; }

        /* === ğŸ“š èƒŒæ™¯è¨­å®š (è®€å–æœ¬åœ°åœ–ç‰‡) === */
        #bg-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('bg_knowledge.jpg'); /* è®€å–æœ¬åœ°åœ–ç‰‡ */
            background-size: cover; background-position: center;
            filter: blur(3px) brightness(0.6); /* ç¨å¾®æ¨¡ç³Šè®Šæš—ï¼Œè®“é¡Œç›®æ›´æ¸…æ¥š */
            z-index: -1;
        }

        /* === UI ä»‹é¢ === */
        .container {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; position: relative;
        }

        /* æ¨™é¡Œå€ */
        .header {
            position: absolute; top: 20px; width: 100%; text-align: center; color: white;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8); z-index: 10;
        }
        .header h1 { margin: 0; font-size: 2.5rem; letter-spacing: 2px; }
        .header p { margin: 5px 0 0; color: #ddd; font-size: 1rem; }

        /* === 1. å¹´ç´šé¸æ“‡é¸å–® === */
        #grade-menu {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center; width: 80%; max-width: 400px;
            border: 1px solid #fff;
        }
        .g-btn {
            display: block; width: 100%; padding: 15px; margin: 15px 0;
            font-size: 1.4rem; font-weight: bold; border: none; border-radius: 50px;
            cursor: pointer; transition: 0.2s; color: white;
            box-shadow: 0 5px 0 rgba(0,0,0,0.2);
        }
        .g-btn:active { transform: translateY(5px); box-shadow: none; }
        .btn-low { background: linear-gradient(to right, #4caf50, #81c784); } /* ç¶  */
        .btn-mid { background: linear-gradient(to right, #ff9800, #ffb74d); } /* æ©˜ */
        .btn-high { background: linear-gradient(to right, #2196f3, #64b5f6); } /* è— */

        /* === 2. éŠæˆ²ä¸»ç•«é¢ === */
        #game-interface { display: none; width: 90%; max-width: 600px; animation: slideUp 0.5s; }
        
        /* é¡Œç›®å¡ç‰‡ */
        .quiz-card {
            background: #fff; border-radius: 20px; padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            text-align: center; position: relative;
            min-height: 250px; display: flex; flex-direction: column; justify-content: center;
        }
        .subject-badge {
            position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
            background: #333; color: #fff; padding: 5px 20px; border-radius: 20px;
            font-weight: bold; font-size: 1rem; box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        .q-text { font-size: 1.8rem; font-weight: bold; line-height: 1.4; margin: 20px 0; color: #2c3e50; }
        
        /* === æ¨¡å¼ A: æ˜¯éé¡ŒæŒ‰éˆ• (ä½å¹´ç´š) === */
        .tf-area { display: flex; gap: 20px; margin-top: 20px; justify-content: center; }
        .tf-btn {
            width: 100px; height: 100px; border-radius: 50%; border: 5px solid #fff;
            font-size: 3rem; font-weight: bold; cursor: pointer; color: white;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: 0.1s;
        }
        .tf-btn:active { transform: scale(0.9); }
        .btn-o { background: #4caf50; }
        .btn-x { background: #f44336; }

        /* === æ¨¡å¼ B: å››é¸ä¸€æŒ‰éˆ• (ä¸­é«˜å¹´ç´š) === */
        .mcq-area { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .mcq-btn {
            padding: 20px; font-size: 1.2rem; font-weight: bold; border: none;
            background: #fff; color: #333; border-radius: 15px;
            cursor: pointer; box-shadow: 0 4px 0 #ccc; border: 2px solid #eee;
            transition: 0.1s;
        }
        .mcq-btn:active { transform: translateY(4px); box-shadow: none; background: #eee; }

        /* === è¨˜åˆ†æ¿ === */
        .score-board {
            display: flex; justify-content: space-between; width: 100%; padding: 0 10px;
            margin-bottom: 10px; color: white; font-weight: bold; font-size: 1.2rem; text-shadow: 0 1px 2px #000;
        }

        /* å°èˆªåˆ— */
        #jetpay-navbar { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 500px; height: 65px; background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); border-radius: 50px; border: 1px solid #eee; display: flex; justify-content: space-around; align-items: center; box-shadow: 0 5px 20px rgba(0,0,0,0.2); z-index: 9999; } .nav-item { text-decoration: none; color: #95a5a6; font-size: 0.75rem; display: flex; flex-direction: column; align-items: center; transition: 0.2s; } .nav-icon { font-size: 1.6rem; margin-bottom: 2px; } .nav-item:hover { color: #2c3e50; transform: translateY(-2px); } .nav-item-special { color: #e67e22; font-weight: bold; } .nav-item-special .nav-icon { background: #e67e22; color: white; width: 45px; height: 45px; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 4px 10px rgba(230, 126, 34, 0.4); margin-top: -20px; border: 4px solid white; }

        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        /* åé¥‹å‹•ç•« */
        .feedback-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 5rem; z-index: 100; text-shadow: 0 5px 20px rgba(0,0,0,0.5); display: none; animation: popIn 0.5s; }
        @keyframes popIn { 0% { transform: translate(-50%, -50%) scale(0); } 80% { transform: translate(-50%, -50%) scale(1.2); } 100% { transform: translate(-50%, -50%) scale(1); } }
    </style>
</head>
<body>

<div id="bg-layer"></div>

<div class="header">
    <h1>çŸ¥è­˜æ®¿å ‚</h1>
    <p>æ™ºæ…§æ˜¯é€šå¾€æœªä¾†çš„é‘°åŒ™</p>
</div>

<div class="container">
    
    <div id="grade-menu">
        <h2 style="margin-top:0; color:#555;">è«‹é¸æ“‡ä½ çš„å¹´ç´š</h2>
        <button class="g-btn btn-low" onclick="startGame('low')">ğŸ‘¶ ä½å¹´ç´š (æ˜¯éé¡Œ)</button>
        <button class="g-btn btn-mid" onclick="startGame('mid')">ğŸ‘¦ ä¸­å¹´ç´š (æŒ‘æˆ°è³½)</button>
        <button class="g-btn btn-high" onclick="startGame('high')">ğŸ§‘â€ğŸ“ é«˜å¹´ç´š (å¤§å¸«è³½)</button>
    </div>

    <div id="game-interface">
        <div class="score-board">
            <span id="grade-label">ä½å¹´ç´š</span>
            <span>å¾—åˆ†: <span id="score">0</span></span>
        </div>

        <div class="quiz-card">
            <div class="subject-badge" id="subj-badge">æ•¸å­¸</div>
            <div class="q-text" id="q-text">é¡Œç›®è¼‰å…¥ä¸­...</div>
        </div>

        <div id="tf-panel" class="tf-area" style="display:none;">
            <div class="tf-btn btn-o" onclick="checkAns(true)">O</div>
            <div class="tf-btn btn-x" onclick="checkAns(false)">X</div>
        </div>

        <div id="mcq-panel" class="mcq-area" style="display:none;">
            </div>
        
        <button onclick="location.reload()" style="margin-top:20px; padding:10px 20px; background:rgba(255,255,255,0.2); color:fff; border:1px solid white; border-radius:20px; cursor:pointer;">é€€å‡ºæŒ‘æˆ°</button>
    </div>

</div>

<div id="fb-correct" class="feedback-popup">âœ…</div>
<div id="fb-wrong" class="feedback-popup">âŒ</div>

<div id="jetpay-navbar">
    <a href="index.html" class="nav-item"><span class="nav-icon">ğŸ </span><span>é¦–é </span></a>
    <a href="simple_games.html" class="nav-item"><span class="nav-icon">ğŸ§©</span><span>ç°¡å–®</span></a>
    <a href="adventure_map.html" class="nav-item"><span class="nav-icon">ğŸ°</span><span>é—–é—œ</span></a>
    <a href="knowledge_games.html" class="nav-item nav-item-special"><span class="nav-icon">ğŸ“š</span><span>çŸ¥è­˜</span></a>
    <a href="#" class="nav-item" onclick="alert('æ’è¡Œæ¦œå³å°‡é–‹æ”¾ï¼')"><span class="nav-icon">ğŸ†</span><span>æ’è¡Œ</span></a>
</div>

<script>
    // ğŸ’¡ é¡Œç›®è³‡æ–™åº« (æ‚¨å¯ä»¥éš¨æ™‚åœ¨é€™è£¡å¢åŠ é¡Œç›®)
    // æ ¼å¼èªªæ˜ï¼š
    // Low: { s:ç§‘ç›®, q:é¡Œç›®, a:æ­£ç¢ºç­”æ¡ˆ(trueç‚ºO, falseç‚ºX) }
    // Mid/High: { s:ç§‘ç›®, q:é¡Œç›®, o:[é¸é …1, é¸é …2, é¸é …3, é¸é …4], a:æ­£ç¢ºé¸é …æ–‡å­— }
    
    const DB = {
        low: [ // æ˜¯éé¡Œ (ç­”æ¡ˆ true=O, false=X)
            {s:"ç”Ÿæ´»", q:"ç´…ç‡ˆåœï¼Œç¶ ç‡ˆè¡Œã€‚", a:true},
            {s:"ç”Ÿæ´»", q:"éé¦¬è·¯è¦åœ¨è»Šé™£ä¸­ç©¿æ¢­ã€‚", a:false},
            {s:"æ•¸å­¸", q:"5 + 5 = 10", a:true},
            {s:"æ•¸å­¸", q:"ä¸‰è§’å½¢æœ‰ 4 å€‹è§’ã€‚", a:false},
            {s:"åœ‹èª", q:"ã€Œè˜‹æœã€æ˜¯æ°´æœã€‚", a:true},
            {s:"åœ‹èª", q:"å¤ªé™½å¾è¥¿é‚Šå‡èµ·ã€‚", a:false},
            {s:"è‡ªç„¶", q:"å†°å¡ŠèåŒ–æœƒè®Šæˆæ°´ã€‚", a:true},
            {s:"è‹±æ–‡", q:"Apple æ˜¯é¦™è•‰çš„æ„æ€ã€‚", a:false},
            {s:"ç”Ÿæ´»", q:"ç¡è¦ºå‰è¦åˆ·ç‰™ã€‚", a:true},
            {s:"ç¤¾æœƒ", q:"æˆ‘å€‘ä½åœ¨æœˆçƒä¸Šã€‚", a:false}
        ],
        mid: [ // å››é¸ä¸€
            {s:"ç¤¾æœƒ", q:"å°ç£çš„é¦–éƒ½åœ¨å“ªè£¡ï¼Ÿ", o:["å°åŒ—","é«˜é›„","å°ä¸­","å°å—"], a:"å°åŒ—"},
            {s:"æ•¸å­¸", q:"8 x 7 = ?", o:["56","48","64","54"], a:"56"},
            {s:"è‡ªç„¶", q:"ç£éµèƒ½å¸ä»€éº¼ï¼Ÿ", o:["éµé‡˜","æœ¨é ­","å¡‘è† ","ç´™"], a:"éµé‡˜"},
            {s:"åœ‹èª", q:"å®ˆæ ªå¾…__ï¼Ÿ", o:["å…”","è™","è±¬","é¾"], a:"å…”"},
            {s:"è‹±æ–‡", q:"Thank you çš„æ„æ€æ˜¯ï¼Ÿ", o:["è¬è¬","å°ä¸èµ·","ä½ å¥½","å†è¦‹"], a:"è¬è¬"},
            {s:"æ•¸å­¸", q:"1å…¬é‡Œç­‰æ–¼å¹¾å…¬å°ºï¼Ÿ", o:["1000","100","10","10000"], a:"1000"},
            {s:"è‡ªç„¶", q:"é’è›™å°æ™‚å€™å«ä»€éº¼ï¼Ÿ", o:["èŒèšª","æ¯›æ¯›èŸ²","å°é­š","å­‘å­“"], a:"èŒèšª"},
            {s:"ç¤¾æœƒ", q:"ç«¯åˆç¯€è¦åƒä»€éº¼ï¼Ÿ", o:["ç²½å­","æœˆé¤…","æ¹¯åœ“","è›‹ç³•"], a:"ç²½å­"}
        ],
        high: [ // å››é¸ä¸€ (è¼ƒé›£)
            {s:"æ•¸å­¸", q:"ä¸‰è§’å½¢å…§è§’å’Œæ˜¯å¹¾åº¦ï¼Ÿ", o:["180åº¦","360åº¦","90åº¦","100åº¦"], a:"180åº¦"},
            {s:"è‡ªç„¶", q:"æ¤ç‰©é€²è¡Œå…‰åˆä½œç”¨éœ€è¦ï¼Ÿ", o:["é™½å…‰","æœˆå…‰","æ˜Ÿå…‰","ç‡ˆå…‰"], a:"é™½å…‰"},
            {s:"ç¤¾æœƒ", q:"å°ç£æœ€é«˜çš„å±±æ˜¯ï¼Ÿ", o:["ç‰å±±","é›ªå±±","é˜¿é‡Œå±±","é™½æ˜å±±"], a:"ç‰å±±"},
            {s:"åœ‹èª", q:"å“ªä¸€å€‹å­—æœ‰éŒ¯ï¼Ÿ", o:["å†æ¥å†å‹µ","å†æ¥å†å²","é¥è€Œä¸æ¨","å …æŒåˆ°åº•"], a:"å†æ¥å†å‹µ"},
            {s:"è‹±æ–‡", q:"Delicious æ˜¯ä»€éº¼æ„æ€ï¼Ÿ", o:["ç¾å‘³çš„","å±éšªçš„","ç”Ÿæ°£çš„","å¿«æ¨‚çš„"], a:"ç¾å‘³çš„"},
            {s:"æ•¸å­¸", q:"0.5 + 0.5 = ?", o:["1","0.55","0.1","10"], a:"1"},
            {s:"è‡ªç„¶", q:"æœˆäº®ç¹è‘—èª°è½‰ï¼Ÿ", o:["åœ°çƒ","å¤ªé™½","ç«æ˜Ÿ","é‡‘æ˜Ÿ"], a:"åœ°çƒ"},
            {s:"ç¤¾æœƒ", q:"ä¸‹åˆ—å“ªå€‹æ˜¯ç›´è½„å¸‚ï¼Ÿ", o:["é«˜é›„å¸‚","åŸºéš†å¸‚","æ–°ç«¹å¸‚","å˜‰ç¾©å¸‚"], a:"é«˜é›„å¸‚"}
        ]
    };

    let currentGrade = '';
    let currentScore = 0;
    let currentQuestion = null;

    function startGame(grade) {
        currentGrade = grade;
        currentScore = 0;
        document.getElementById('score').innerText = 0;
        
        // åˆ‡æ›ä»‹é¢
        document.getElementById('grade-menu').style.display = 'none';
        document.getElementById('game-interface').style.display = 'block';
        
        // è¨­å®šæ¨™ç±¤
        const map = {'low':'ğŸ‘¶ ä½å¹´ç´š','mid':'ğŸ‘¦ ä¸­å¹´ç´š','high':'ğŸ§‘â€ğŸ“ é«˜å¹´ç´š'};
        document.getElementById('grade-label').innerText = map[grade];

        // ä¾æ“šå¹´ç´šé¡¯ç¤ºä¸åŒæŒ‰éˆ•å€
        if(grade === 'low') {
            document.getElementById('tf-panel').style.display = 'flex';
            document.getElementById('mcq-panel').style.display = 'none';
        } else {
            document.getElementById('tf-panel').style.display = 'none';
            document.getElementById('mcq-panel').style.display = 'grid';
        }

        nextQuestion();
    }

    function nextQuestion() {
        const pool = DB[currentGrade];
        // éš¨æ©ŸæŠ½é¡Œ
        currentQuestion = pool[Math.floor(Math.random() * pool.length)];
        
        // æ¸²æŸ“é¡Œç›®
        document.getElementById('subj-badge').innerText = currentQuestion.s;
        document.getElementById('q-text').innerText = currentQuestion.q;

        // å¦‚æœæ˜¯ä¸­é«˜å¹´ç´šï¼Œè¦æ¸²æŸ“é¸é …æŒ‰éˆ•
        if(currentGrade !== 'low') {
            const mcqPanel = document.getElementById('mcq-panel');
            mcqPanel.innerHTML = ''; // æ¸…ç©ºèˆŠé¸é …
            
            // æ‰“äº‚é¸é …é †åº
            let opts = [...currentQuestion.o]; // è¤‡è£½é™£åˆ—
            opts.sort(() => Math.random() - 0.5);

            opts.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'mcq-btn';
                btn.innerText = opt;
                btn.onclick = () => checkAns(opt);
                mcqPanel.appendChild(btn);
            });
        }
    }

    function checkAns(userAns) {
        let isCorrect = false;
        
        if(currentGrade === 'low') {
            // æ˜¯éé¡Œæ¯”å° (true/false)
            if(userAns === currentQuestion.a) isCorrect = true;
        } else {
            // é¸æ“‡é¡Œæ¯”å° (æ–‡å­—)
            if(userAns === currentQuestion.a) isCorrect = true;
        }

        // é¡¯ç¤ºåé¥‹
        showFeedback(isCorrect);

        if(isCorrect) {
            currentScore += 10;
            document.getElementById('score').innerText = currentScore;
            setTimeout(nextQuestion, 800); // ç­”å°å»¶é²æ›é¡Œ
        } else {
            // ç­”éŒ¯å¯ä»¥é¸æ“‡æ‰£åˆ†æˆ–éœ‡å‹•ï¼Œé€™è£¡æš«æ™‚ä¸æ‰£åˆ†ï¼Œç›´æ¥æ›é¡Œ
            setTimeout(nextQuestion, 800);
        }
    }

    function showFeedback(isCorrect) {
        const id = isCorrect ? 'fb-correct' : 'fb-wrong';
        const el = document.getElementById(id);
        el.style.display = 'block';
        // é‡æ–°è§¸ç™¼å‹•ç•«
        el.style.animation = 'none';
        el.offsetHeight; /* trigger reflow */
        el.style.animation = 'popIn 0.5s';
        
        setTimeout(() => { el.style.display = 'none'; }, 600);
    }

</script>
</body>
</html>